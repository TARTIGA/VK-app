(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{101:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(24),r=a.n(o),l=(a(101),a(14)),i=a(15),s=a(5),u=a(42),m=a.n(u),d=a(43),b=a.n(d),p=a(44),f=a.n(p),h=(a(34),"LOGIN"),g="_START",E="_SUCCESS",v="_FAIL",y=a(26),O=a(23),j=a.n(O),_=a(32),R=a(13),F=a.n(R),S=function(e){var t=e.id,a=e.activePanel,o=e.headerLabel,r=Object(i.b)(),u=Object(i.c)((function(e){return e.user})),m=Object(i.d)(),d=u.first_name,b=u.last_name,p=u.middle_name,f=u.dob,h=u.serial,O=u.acceptRules,R=Object(n.useState)(!0),F=Object(l.a)(R,2),S=F[0],k=F[1];Object(n.useEffect)((function(){console.log(["USER === ",u]),console.log(["first_name",d]),console.log(["last_name",b])})),Object(n.useEffect)((function(){k(!(null!==d&&null!==b&&null!==p&&null!==f&&null!==h&&!1!==O))}),[d,b,p,f,h,O]);var C=function(e){var t,a="checkbox"===e.target.type?e.target.checked:e.target.value,n=e.target.name;(t=Object(y.a)({},n,a),function(e){console.log(["changeProfile payload",t]),e({type:"CHANGE_PROFILE",payload:t})})(r)},w=function(e){var t;console.log(["sendForm"]),(t={dob:f,first_name:d,last_name:b,middle_name:p,serial:h},function(){var e=Object(_.a)(j.a.mark((function e(a,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(["action checkFormData",t]),e.prev=1,a({type:"".concat("CHECK_FORM_DATA").concat(g)}),e.next=5,fetch("".concat("https://kbmpro.ru/api/","check"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:t})});case 5:c=e.sent,console.log(["checkInfo",c]),a({type:"".concat("CHECK_FORM_DATA").concat(E),payload:c}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(["CHECK_FORM_DATA ",e.t0]),a({type:"".concat("CHECK_FORM_DATA").concat(v)});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}())(r,m.getState)};return c.a.createElement(s.y,{id:t,activePanel:a},c.a.createElement(s.q,{id:t},c.a.createElement(s.r,null,o),c.a.createElement(s.x,{style:{textAlign:"center",margin:"20px 0"},level:"2",weight:"bold"},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u041a\u0411\u041c \u0438 \u0441\u043d\u0438\u0437\u0438\u043c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u041e\u0421\u0410\u0413\u041e"),c.a.createElement(s.i,{style:{margin:"10px"}},c.a.createElement(s.l,{top:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",type:"text",name:"last_name",value:b,status:b?"valid":"error",bottom:b?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0430\u043c\u0438\u043b\u0438\u044e.",onChange:function(e){C(e)}}),c.a.createElement(s.l,{top:"\u0418\u043c\u044f",type:"text",name:"first_name",value:d,status:d?"valid":"error",bottom:d?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f.",onChange:function(e){C(e)}}),c.a.createElement(s.l,{top:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",type:"text",name:"middle_name",value:p,status:p?"valid":"error",bottom:p?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e.",onChange:function(e){C(e)}}),c.a.createElement(s.l,{top:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",type:"date",name:"dob",value:f,status:f?"valid":"error",bottom:f?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0414\u0430\u0442\u0443 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f.",onChange:function(e){C(e)}}),c.a.createElement(s.l,{top:"\u041d\u043e\u043c\u0435\u0440 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f",type:"text",name:"serial",value:h,status:h?"valid":"error",bottom:h?"":"\u041f\u043e\u043b\u0435 \u043d\u043e\u043c\u0435\u0440 \u0432/\u0443 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",onChange:function(e){C(e)}}),c.a.createElement(s.f,{name:"acceptRules",value:O,onChange:function(e){C(e)}},"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u0441 ",c.a.createElement(s.m,null,"\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u043c \u0441\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435\u043c")),c.a.createElement(s.a,{type:"submit",size:"xl",disabled:S,onClick:function(e){return w()}},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u041a\u0411\u041c"),c.a.createElement(s.b,{level:"1",weight:"regular",style:{marginBottom:16}},"*\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0441\u0440\u043e\u043a \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u0430\u044f\u0432\u043a\u0438 1 - 3 \u0434\u043d\u044f. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0439 - 7 \u0434\u043d\u0435\u0439. \u0415\u0441\u043b\u0438 \u041a\u0411\u041c \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u0441\u044f \u043d\u0430 5% \u0438\u043b\u0438 \u043c\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u043c \u0435\u0433\u043e \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c - \u043c\u044b \u0432\u0435\u0440\u043d\u0451\u043c \u0432\u0430\u043c \u0434\u0435\u043d\u044c\u0433\u0438"))))},k=function(e){var t=e.id,a=e.activePanel,o=e.headerLabel;Object(n.useEffect)((function(){console.log(["id",t]),console.log(["activePanel",a])}),[]);return c.a.createElement(s.y,{id:t,activePanel:a},c.a.createElement(s.q,{id:t},c.a.createElement(s.r,null,o),c.a.createElement(s.n,null,[{key:"0",label:"Question 1?"},{key:"1",label:"Question 2?"},{key:"2",label:"Question 3?"}].map((function(e,t){return c.a.createElement(s.e,{expandable:!0},e.label)})))))},C=a(45),w=a.n(C),x=function(e){var t=e.title,a=e.date,n=e.status;return c.a.createElement(s.c,{size:"l",mode:"shadow",style:{height:96}},c.a.createElement(s.t,{multiline:!0,before:c.a.createElement(w.a,{style:{marginRight:10,color:"green"}}),text:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u041a\u0411\u041c",caption:a,after:n},t))},A=function(e){var t=e.id,a=e.activePanel,o=e.headerLabel,r=Object(n.useState)(!1),i=Object(l.a)(r,2),u=i[0],m=i[1];Object(n.useEffect)((function(){console.log(["id",t]),console.log(["activePanel",a])}),[]);return c.a.createElement(s.y,{id:t,activePanel:a},c.a.createElement(s.q,{id:t},c.a.createElement(s.r,null,o),c.a.createElement(s.s,{onRefresh:function(){m(!0),setTimeout((function(){m(!1)}),2e3)},isFetching:u},c.a.createElement(s.k,{separator:"hide"},c.a.createElement(s.d,null,c.a.createElement(x,{title:"\u0417\u0430\u044f\u0432\u043a\u0430 \u2116228",date:"11.11.2020",status:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}),c.a.createElement(x,{title:"\u0417\u0430\u044f\u0432\u043a\u0430 \u2116228",date:"11.11.2020",status:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}),c.a.createElement(x,{title:"\u0417\u0430\u044f\u0432\u043a\u0430 \u2116228",date:"11.11.2020",status:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}))))))},P=function(){var e=Object(i.b)(),t=Object(i.d)(),a=Object(n.useState)("form"),o=Object(l.a)(a,2),r=o[0],u=o[1],d=Object(n.useState)(null),p=Object(l.a)(d,2),y=p[0],O=(p[1],Object(n.useState)(3)),R=Object(l.a)(O,2),C=R[0],w=(R[1],Object(i.c)((function(e){return e.orders.isFetching})));Object(n.useEffect)((function(){console.log(["isFetching",w]),function(){try{F.a.subscribe((function(e){return console.log(e)}));var e=F.a.send("VKWebAppInit",{});console.log("bridge data",e),F.a.supports("VKWebAppResizeWindow")&&F.a.send("VKWebAppResizeWindow",{width:800,height:1e3})}catch(t){console.log(["ERROR vkINIT",t])}}(),function(){var e=Object(_.a)(j.a.mark((function e(t,a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(["getUserInfo"]),e.prev=1,t({type:"".concat(h).concat(g)}),e.next=5,F.a.send("VKWebAppGetUserInfo");case 5:n=e.sent,t({type:"".concat(h).concat(E),payload:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(["getUserInfo ",e.t0]),t({type:"".concat(h).concat(v)});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()(e,t.getState)}));s.p,s.o;var x=[{story:"form",label:"\u0424\u043e\u0440\u043c\u0430 \u0437\u0430\u044f\u0432\u043a\u0438",icon:c.a.createElement(m.a,null),component:c.a.createElement(S,{id:"form",activePanel:"form",headerLabel:"\u0424\u043e\u0440\u043c\u0430 \u0437\u0430\u044f\u0432\u043a\u0438",handleGoTo:function(){}})},{story:"orders",label:"\u041c\u043e\u0438 \u0437\u0430\u044f\u0432\u043a\u0438",icon:c.a.createElement(b.a,null),component:c.a.createElement(A,{id:"orders",activePanel:"orders",headerLabel:"\u041c\u043e\u0438 \u0437\u0430\u044f\u0432\u043a\u0438",handleGoTo:function(){}})},{story:"faq",label:"FAQ",icon:c.a.createElement(f.a,null),component:c.a.createElement(k,{id:"faq",activePanel:"faq",headerLabel:"FAQ",handleGoTo:function(){}})}];return c.a.createElement(s.h,{activeStory:r,tabbar:c.a.createElement(s.u,{shadow:!1},x.map((function(e,t){return c.a.createElement(s.v,{key:t.toString(),label:"orders"===e.story?C:null,onClick:function(){return u(e.story)},selected:r===e.story,"data-story":e.story,text:e.label},e.icon)})))},x.map((function(e,t){return e.component})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(20),I=a(46),L=a(47),D=a(12),G={items:[],error:"",isFetching:!1},K={id:null,first_name:null,last_name:null,middle_name:null,dob:null,serial:null,sex:null,city:null,photo_100:null,acceptRules:!1,timezone:null,error:"",isFetching:!1},W=Object(T.c)({orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat("SET_ORDERS").concat(g):return Object(D.a)(Object(D.a)({},e),{},{isFetching:!0});case"".concat("SET_ORDERS").concat(E):return Object(D.a)(Object(D.a)({},e),{},{isFetching:!1,items:Object(L.a)(t.payload)});case"".concat("SET_ORDERS").concat(v):return Object(D.a)(Object(D.a)({},e),{},{isFetching:!1,error:t.payload.message});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(h).concat(g):return console.log(["".concat(h).concat(g)]),Object(D.a)(Object(D.a)({},e),{},{isFetching:!0});case"".concat(h).concat(E):return console.log(["".concat(h).concat(E),t.payload]),Object(D.a)(Object(D.a)({},e),{},{isFetching:!1},t.payload);case"".concat(h).concat(v):return console.log(["".concat(h).concat(v)]),Object(D.a)(Object(D.a)({},e),{},{isFetching:!1,error:t.payload.error_data});case"".concat("CHANGE_PROFILE"):return console.log(["CHANGE_PROFILE",t.payload]),Object(D.a)(Object(D.a)({},e),t.payload);default:return e}}}),H=Object(T.d)(W,Object(T.a)(I.a)),q=document.getElementById("root");r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:H},c.a.createElement(P,null))),q),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,t,a){e.exports=a(121)}},[[96,1,2]]]);
//# sourceMappingURL=main.a366c0a8.chunk.js.map